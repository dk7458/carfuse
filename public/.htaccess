RewriteEngine On
RewriteBase /
DirectoryIndex index.php

AddHandler application/x-httpd-php .php

# Block direct access to API PHP files
RewriteCond %{REQUEST_URI} ^/api/.*\.php$
RewriteRule ^ - [F,L]

# Allow direct access to static files (CSS, JS, images)
RewriteCond %{REQUEST_FILENAME} -f
RewriteRule ^ - [L]

# Fix issues where /dashboard, /profile, and /login do not load correctly
RewriteRule ^(dashboard|profile|login)$ index.php [L]

# Ensure .htaccess rules do not interfere with FastRoute processing
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^ index.php [QSA,L]

# PHP session configuration
php_flag session.auto_start on
php_value session.use_cookies 1
php_value session.use_only_cookies 1
