RewriteEngine On

# ✅ Ensure public views are routed correctly
RewriteRule ^(home|auth/login|vehicles|auth/register)$ views/$1.php [L]

# ✅ Prevent forcing API authentication on public pages
RewriteRule ^api/(.*)$ api.php?route=$1 [QSA,L]

# ✅ Prevent access to backend directories
RewriteRule ^(App/Controllers|App/Services|config|vendor) - [F,L]

# ✅ Ensure static assets load correctly
RewriteCond %{REQUEST_URI} ^/(css|js|images|views|uploads)/(.*)$
RewriteCond %{DOCUMENT_ROOT}/public/%1/%2 -f
RewriteRule ^(css|js|images|views|uploads)/(.*)$ /public/$1/$2 [L]

# ✅ Forward all remaining requests to FastRoute in index.php
RewriteRule ^ index.php [QSA,L]
