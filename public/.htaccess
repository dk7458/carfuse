RewriteEngine On

# ✅ Allow guest access to specific views (without requiring authentication)
RewriteRule ^(home|auth/login|vehicles|auth/register)$ views/$1.php [L]

# ✅ Prevent direct access to backend directories
RewriteRule ^(App/Controllers|App/Services|config|vendor|logs) - [F,L]

# ✅ Ensure API requests go through public/api.php
RewriteCond %{REQUEST_URI} ^/api/ [NC]
RewriteRule .* - [L]

# ✅ Allow direct access to static assets
RewriteCond %{REQUEST_URI} ^/(css|js|images|views|uploads|assets)/(.*)$
RewriteCond %{DOCUMENT_ROOT}/public/%1/%2 -f
RewriteRule ^(css|js|images|views|uploads|assets)/(.*)$ /public/$1/$2 [L]

# ✅ Ensure requests without file extensions are forwarded to FastRoute
RewriteCond %{REQUEST_URI} !\.(css|js|png|jpg|jpeg|gif|svg|woff|woff2|ttf|eot|ico|pdf|json)$ [NC]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# ✅ Forward remaining requests to index.php
RewriteRule ^ index.php [QSA,L]
