RewriteEngine On

# ✅ Ensure requests to `/public/` are handled by the internal `.htaccess`
RewriteRule ^public/ - [L]

# ✅ Allow direct access to public files
RewriteCond %{REQUEST_URI} ^/(public|css|js|images|api)/(.*)$
RewriteCond %{DOCUMENT_ROOT}/%{REQUEST_URI} -f
RewriteRule ^(.*)$ $1 [L]

# ✅ Prevent direct access to backend files while allowing necessary access
RewriteCond %{REQUEST_URI} ^/App/(.*)$
RewriteCond %{REQUEST_URI} !^/App/Services/PublicAccess/
RewriteRule ^ - [F,L]

# ✅ Forward all other requests to public/index.php
RewriteRule ^(.*)$ public/index.php [QSA,L]
