RewriteEngine On

# ✅ Forward Authorization Header
SetEnvIf Authorization "(.*)" HTTP_AUTHORIZATION=$1

# ✅ Redirect API Requests to `index.php`
RewriteCond %{REQUEST_URI} ^/api/ [NC]
RewriteRule ^ index.php [QSA,L]

# ✅ Serve Static Assets (CSS, JS, Images, etc.)
RewriteCond %{REQUEST_URI} ^/(css|js|images|uploads|assets)/(.*)$
RewriteCond %{DOCUMENT_ROOT}/public/%1/%2 -f
RewriteRule ^(css|js|images|uploads|assets)/(.*)$ /public/$1/$2 [L]

# ✅ Block Direct Access to Backend Folders
RewriteRule ^(App/Controllers|App/Services|config|vendor|logs) - [F,L]

# ✅ Forward Remaining Requests to `index.php`
RewriteRule ^ index.php [QSA,L]
