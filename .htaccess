RewriteEngine On

# ✅ Route API requests through index.php for FastRoute
RewriteCond %{REQUEST_URI} ^/api/ [NC]
RewriteRule ^api/(.*)$ index.php?route=api/$1 [QSA,L]

# ✅ Ensure static files load correctly
RewriteCond %{REQUEST_URI} ^/(css|js|images|uploads|assets)/(.*)$ [OR]
RewriteCond %{DOCUMENT_ROOT}/public/%1/%2 -f
RewriteRule ^(css|js|images|uploads|assets)/(.*)$ /public/$1/$2 [L]

# ✅ Block direct access to backend directories
RewriteRule ^(App/Controllers|App/Services|config|vendor|logs) - [F,L]

# ✅ Forward remaining requests to index.php
RewriteRule ^ index.php [QSA,L]
